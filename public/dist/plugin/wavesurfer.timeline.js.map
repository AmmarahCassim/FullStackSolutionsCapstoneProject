{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 2c15e2516df024c56ce9","webpack:///./src/plugin/timeline.js"],"names":["TimelinePlugin","params","name","deferInit","instance","ws","container","document","querySelector","Error","wavesurfer","util","extend","height","notchPercentHeight","labelPadding","primaryColor","secondaryColor","primaryFontColor","secondaryFontColor","fontFamily","fontSize","zoomDebounce","formatTimeCallback","seconds","minutes","parseInt","Math","round","timeInterval","pxPerSec","ceil","primaryLabelInterval","secondaryLabelInterval","canvases","wrapper","drawer","pixelRatio","maxCanvasWidth","maxCanvasElementWidth","_onZoom","debounce","render","on","_onReady","isReady","unAll","un","_onRedraw","removeEventListener","_onScroll","parentNode","_onWrapperClick","removeChild","wsParams","innerHTML","appendChild","createElement","style","display","position","userSelect","webkitUserSelect","fillParent","scrollParent","width","overflowX","overflowY","addEventListener","createWrapper","updateCanvases","updateCanvasesPositioning","renderCanvases","addCanvas","canvas","push","zIndex","removeCanvas","pop","parentElement","totalWidth","scrollWidth","requiredCanvases","length","canvasesLength","forEach","i","canvasWidth","left","duration","backend","getDuration","totalSeconds","getWidth","height1","height2","pixelsPerSecond","formatTime","intervalFnOrVal","option","curPixel","curSeconds","positioning","renderPositions","cb","pos","setFillStyles","setFonts","fillRect","fillText","fillStyle","getContext","font","x","y","leftOffset","intersection","x1","max","y1","x2","min","y2","text","textWidth","xOffset","context","measureText","scrollLeft","e","preventDefault","relX","offsetX","layerX","fireEvent"],"mappings":"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","file":"wavesurfer.timeline.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"timeline\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"timeline\"] = factory();\n\telse\n\t\troot[\"WaveSurfer\"] = root[\"WaveSurfer\"] || {}, root[\"WaveSurfer\"][\"timeline\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"localhost:8080/dist/plugin/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 2c15e2516df024c56ce9","/**\n * @typedef {Object} TimelinePluginParams\n * @desc Extends the `WavesurferParams` wavesurfer was initialised with\n * @property {!string|HTMLElement} container CSS selector or HTML element where\n * the timeline should be drawn. This is the only required parameter.\n * @property {number} notchPercentHeight=90 Height of notches in percent\n * @property {string} primaryColor='#000' The colour of the main notches\n * @property {string} secondaryColor='#c0c0c0' The colour of the secondary\n * notches\n * @property {string} primaryFontColor='#000' The colour of the labels next to\n * the main notches\n * @property {string} secondaryFontColor='#000' The colour of the labels next to\n * the secondary notches\n * @property {number} labelPadding=5 The padding between the label and the notch\n * @property {?number} zoomDebounce A debounce timeout to increase rendering\n * performance for large files\n * @property {string} fontFamily='Arial'\n * @property {number} fontSize=10 Font size of labels in pixels\n * @property {function} formatTimeCallback=→00:00\n * @property {?boolean} deferInit Set to true to manually call\n * `initPlugin('timeline')`\n */\n\n/**\n * Adds a timeline to the waveform.\n *\n * @implements {PluginClass}\n * @extends {Observer}\n * @example\n * // es6\n * import TimelinePlugin from 'wavesurfer.timeline.js';\n *\n * // commonjs\n * var TimelinePlugin = require('wavesurfer.timeline.js');\n *\n * // if you are using <script> tags\n * var TimelinePlugin = window.WaveSurfer.timeline;\n *\n * // ... initialising wavesurfer with the plugin\n * var wavesurfer = WaveSurfer.create({\n *   // wavesurfer options ...\n *   plugins: [\n *     TimelinePlugin.create({\n *       // plugin options ...\n *     })\n *   ]\n * });\n */\nexport default class TimelinePlugin {\n    /**\n     * Timeline plugin definition factory\n     *\n     * This function must be used to create a plugin definition which can be\n     * used by wavesurfer to correctly instantiate the plugin.\n     *\n     * @param  {TimelinePluginParams} params parameters use to initialise the plugin\n     * @return {PluginDefinition} an object representing the plugin\n     */\n    static create(params) {\n        return {\n            name: 'timeline',\n            deferInit: params && params.deferInit ? params.deferInit : false,\n            params: params,\n            instance: TimelinePlugin\n        };\n    }\n\n    // event handlers\n    /** @private */\n    _onScroll = () => {\n        if (this.wrapper && this.drawer.wrapper) {\n            this.wrapper.scrollLeft = this.drawer.wrapper.scrollLeft;\n        }\n    };\n    /** @private */\n    _onRedraw = () => this.render();\n    /** @private */\n    _onReady = () => {\n        const ws = this.wavesurfer;\n        this.drawer = ws.drawer;\n        this.pixelRatio = ws.drawer.params.pixelRatio;\n        this.maxCanvasWidth = ws.drawer.maxCanvasWidth || ws.drawer.width;\n        this.maxCanvasElementWidth =\n            ws.drawer.maxCanvasElementWidth ||\n            Math.round(this.maxCanvasWidth / this.pixelRatio);\n\n        ws.drawer.wrapper.addEventListener('scroll', this._onScroll);\n        ws.on('redraw', this._onRedraw);\n        ws.on('zoom', this._onZoom);\n        this.render();\n    };\n    /** @private */\n    _onWrapperClick = e => {\n        e.preventDefault();\n        const relX = 'offsetX' in e ? e.offsetX : e.layerX;\n        this.fireEvent('click', relX / this.wrapper.scrollWidth || 0);\n    };\n\n    /**\n     * Creates an instance of TimelinePlugin.\n     *\n     * You probably want to use TimelinePlugin.create()\n     *\n     * @param {TimelinePluginParams} params Plugin parameters\n     * @param {object} ws Wavesurfer instance\n     */\n    constructor(params, ws) {\n        /** @private */\n        this.container =\n            'string' == typeof params.container\n                ? document.querySelector(params.container)\n                : params.container;\n\n        if (!this.container) {\n            throw new Error('No container for wavesurfer timeline');\n        }\n        /** @private */\n        this.wavesurfer = ws;\n        /** @private */\n        this.util = ws.util;\n        /** @private */\n        this.params = this.util.extend(\n            {},\n            {\n                height: 20,\n                notchPercentHeight: 90,\n                labelPadding: 5,\n                primaryColor: '#000',\n                secondaryColor: '#c0c0c0',\n                primaryFontColor: '#000',\n                secondaryFontColor: '#000',\n                fontFamily: 'Arial',\n                fontSize: 10,\n                zoomDebounce: false,\n                formatTimeCallback(seconds) {\n                    if (seconds / 60 > 1) {\n                        // calculate minutes and seconds from seconds count\n                        const minutes = parseInt(seconds / 60, 10);\n                        seconds = parseInt(seconds % 60, 10);\n                        // fill up seconds with zeroes\n                        seconds = seconds < 10 ? '0' + seconds : seconds;\n                        return `${minutes}:${seconds}`;\n                    }\n                    return Math.round(seconds * 1000) / 1000;\n                },\n                timeInterval(pxPerSec) {\n                    if (pxPerSec >= 25) {\n                        return 1;\n                    } else if (pxPerSec * 5 >= 25) {\n                        return 5;\n                    } else if (pxPerSec * 15 >= 25) {\n                        return 15;\n                    }\n                    return Math.ceil(0.5 / pxPerSec) * 60;\n                },\n                primaryLabelInterval(pxPerSec) {\n                    if (pxPerSec >= 25) {\n                        return 10;\n                    } else if (pxPerSec * 5 >= 25) {\n                        return 6;\n                    } else if (pxPerSec * 15 >= 25) {\n                        return 4;\n                    }\n                    return 4;\n                },\n                secondaryLabelInterval(pxPerSec) {\n                    if (pxPerSec >= 25) {\n                        return 5;\n                    } else if (pxPerSec * 5 >= 25) {\n                        return 2;\n                    } else if (pxPerSec * 15 >= 25) {\n                        return 2;\n                    }\n                    return 2;\n                }\n            },\n            params\n        );\n\n        /** @private */\n        this.canvases = [];\n        /** @private */\n        this.wrapper = null;\n        /** @private */\n        this.drawer = null;\n        /** @private */\n        this.pixelRatio = null;\n        /** @private */\n        this.maxCanvasWidth = null;\n        /** @private */\n        this.maxCanvasElementWidth = null;\n        /**\n         * This event handler has to be in the constructor function because it\n         * relies on the debounce function which is only available after\n         * instantiation\n         *\n         * Use a debounced function if zoomDebounce is defined\n         *\n         * @private\n         */\n        this._onZoom = this.params.zoomDebounce\n            ? this.wavesurfer.util.debounce(\n                  () => this.render(),\n                  this.params.zoomDebounce\n              )\n            : () => this.render();\n    }\n\n    /**\n     * Initialisation function used by the plugin API\n     */\n    init() {\n        this.wavesurfer.on('ready', this._onReady);\n        // Check if ws is ready\n        if (this.wavesurfer.isReady) {\n            this._onReady();\n        }\n    }\n\n    /**\n     * Destroy function used by the plugin API\n     */\n    destroy() {\n        this.unAll();\n        this.wavesurfer.un('redraw', this._onRedraw);\n        this.wavesurfer.un('zoom', this._onZoom);\n        this.wavesurfer.un('ready', this._onReady);\n        this.wavesurfer.drawer.wrapper.removeEventListener(\n            'scroll',\n            this._onScroll\n        );\n        if (this.wrapper && this.wrapper.parentNode) {\n            this.wrapper.removeEventListener('click', this._onWrapperClick);\n            this.wrapper.parentNode.removeChild(this.wrapper);\n            this.wrapper = null;\n        }\n    }\n\n    /**\n     * Create a timeline element to wrap the canvases drawn by this plugin\n     *\n     * @private\n     */\n    createWrapper() {\n        const wsParams = this.wavesurfer.params;\n        this.container.innerHTML = '';\n        this.wrapper = this.container.appendChild(\n            document.createElement('timeline')\n        );\n        this.util.style(this.wrapper, {\n            display: 'block',\n            position: 'relative',\n            userSelect: 'none',\n            webkitUserSelect: 'none',\n            height: `${this.params.height}px`\n        });\n\n        if (wsParams.fillParent || wsParams.scrollParent) {\n            this.util.style(this.wrapper, {\n                width: '100%',\n                overflowX: 'hidden',\n                overflowY: 'hidden'\n            });\n        }\n\n        this.wrapper.addEventListener('click', this._onWrapperClick);\n    }\n\n    /**\n     * Render the timeline (also updates the already rendered timeline)\n     *\n     * @private\n     */\n    render() {\n        if (!this.wrapper) {\n            this.createWrapper();\n        }\n        this.updateCanvases();\n        this.updateCanvasesPositioning();\n        this.renderCanvases();\n    }\n\n    /**\n     * Make sure the correct of timeline canvas elements exist and are cached in\n     * this.canvases\n     *\n     * @private\n     */\n    updateCanvases() {\n        const addCanvas = () => {\n            const canvas = this.wrapper.appendChild(\n                document.createElement('canvas')\n            );\n            this.canvases.push(canvas);\n            this.util.style(canvas, {\n                position: 'absolute',\n                zIndex: 4\n            });\n        };\n        const removeCanvas = () => {\n            const canvas = this.canvases.pop();\n            canvas.parentElement.removeChild(canvas);\n        };\n\n        const totalWidth = Math.round(this.drawer.wrapper.scrollWidth);\n        const requiredCanvases = Math.ceil(\n            totalWidth / this.maxCanvasElementWidth\n        );\n        while (this.canvases.length < requiredCanvases) {\n            addCanvas();\n        }\n\n        while (this.canvases.length > requiredCanvases) {\n            removeCanvas();\n        }\n    }\n\n    /**\n     * Update the dimensions and positioning style for all the timeline canvases\n     *\n     * @private\n     */\n    updateCanvasesPositioning() {\n        // cache length for perf\n        const canvasesLength = this.canvases.length;\n        this.canvases.forEach((canvas, i) => {\n            // canvas width is the max element width, or if it is the last the\n            // required width\n            const canvasWidth =\n                i === canvasesLength - 1\n                    ? this.drawer.wrapper.scrollWidth -\n                      this.maxCanvasElementWidth * (canvasesLength - 1)\n                    : this.maxCanvasElementWidth;\n            // set dimensions and style\n            canvas.width = canvasWidth * this.pixelRatio;\n            // on certain pixel ratios the canvas appears cut off at the bottom,\n            // therefore leave 1px extra\n            canvas.height = (this.params.height + 1) * this.pixelRatio;\n            this.util.style(canvas, {\n                width: `${canvasWidth}px`,\n                height: `${this.params.height}px`,\n                left: `${i * this.maxCanvasElementWidth}px`\n            });\n        });\n    }\n\n    /**\n     * Render the timeline labels and notches\n     *\n     * @private\n     */\n    renderCanvases() {\n        const duration = this.wavesurfer.backend.getDuration();\n        if (duration <= 0) {\n            return;\n        }\n        const wsParams = this.wavesurfer.params;\n        const fontSize = this.params.fontSize * wsParams.pixelRatio;\n        const totalSeconds = parseInt(duration, 10) + 1;\n        const width =\n            wsParams.fillParent && !wsParams.scrollParent\n                ? this.drawer.getWidth()\n                : this.drawer.wrapper.scrollWidth * wsParams.pixelRatio;\n        const height1 = this.params.height * this.pixelRatio;\n        const height2 =\n            this.params.height *\n            (this.params.notchPercentHeight / 100) *\n            this.pixelRatio;\n        const pixelsPerSecond = width / duration;\n\n        const formatTime = this.params.formatTimeCallback;\n        // if parameter is function, call the function with\n        // pixelsPerSecond, otherwise simply take the value as-is\n        const intervalFnOrVal = option =>\n            typeof option === 'function' ? option(pixelsPerSecond) : option;\n        const timeInterval = intervalFnOrVal(this.params.timeInterval);\n        const primaryLabelInterval = intervalFnOrVal(\n            this.params.primaryLabelInterval\n        );\n        const secondaryLabelInterval = intervalFnOrVal(\n            this.params.secondaryLabelInterval\n        );\n\n        let curPixel = 0;\n        let curSeconds = 0;\n        let i;\n        // build an array of position data with index, second and pixel data,\n        // this is then used multiple times below\n        const positioning = [];\n        for (i = 0; i < totalSeconds / timeInterval; i++) {\n            positioning.push([i, curSeconds, curPixel]);\n            curSeconds += timeInterval;\n            curPixel += pixelsPerSecond * timeInterval;\n        }\n\n        // iterate over each position\n        const renderPositions = cb => {\n            positioning.forEach(pos => {\n                cb(pos[0], pos[1], pos[2]);\n            });\n        };\n\n        // render primary labels\n        this.setFillStyles(this.params.primaryColor);\n        this.setFonts(`${fontSize}px ${this.params.fontFamily}`);\n        this.setFillStyles(this.params.primaryFontColor);\n        renderPositions((i, curSeconds, curPixel) => {\n            if (i % primaryLabelInterval === 0) {\n                this.fillRect(curPixel, 0, 1, height1);\n                this.fillText(\n                    formatTime(curSeconds),\n                    curPixel + this.params.labelPadding * this.pixelRatio,\n                    height1\n                );\n            }\n        });\n\n        // render secondary labels\n        this.setFillStyles(this.params.secondaryColor);\n        this.setFonts(`${fontSize}px ${this.params.fontFamily}`);\n        this.setFillStyles(this.params.secondaryFontColor);\n        renderPositions((i, curSeconds, curPixel) => {\n            if (i % secondaryLabelInterval === 0) {\n                this.fillRect(curPixel, 0, 1, height1);\n                this.fillText(\n                    formatTime(curSeconds),\n                    curPixel + this.params.labelPadding * this.pixelRatio,\n                    height1\n                );\n            }\n        });\n\n        // render the actual notches (when no labels are used)\n        this.setFillStyles(this.params.secondaryColor);\n        renderPositions((i, curSeconds, curPixel) => {\n            if (\n                i % secondaryLabelInterval !== 0 &&\n                i % primaryLabelInterval !== 0\n            ) {\n                this.fillRect(curPixel, 0, 1, height2);\n            }\n        });\n    }\n\n    /**\n     * Set the canvas fill style\n     *\n     * @param {DOMString|CanvasGradient|CanvasPattern} fillStyle\n     * @private\n     */\n    setFillStyles(fillStyle) {\n        this.canvases.forEach(canvas => {\n            canvas.getContext('2d').fillStyle = fillStyle;\n        });\n    }\n\n    /**\n     * Set the canvas font\n     *\n     * @param {DOMString} font\n     * @private\n     */\n    setFonts(font) {\n        this.canvases.forEach(canvas => {\n            canvas.getContext('2d').font = font;\n        });\n    }\n\n    /**\n     * Draw a rectangle on the canvases\n     *\n     * (it figures out the offset for each canvas)\n     *\n     * @param {number} x\n     * @param {number} y\n     * @param {number} width\n     * @param {number} height\n     * @private\n     */\n    fillRect(x, y, width, height) {\n        this.canvases.forEach((canvas, i) => {\n            const leftOffset = i * this.maxCanvasWidth;\n\n            const intersection = {\n                x1: Math.max(x, i * this.maxCanvasWidth),\n                y1: y,\n                x2: Math.min(x + width, i * this.maxCanvasWidth + canvas.width),\n                y2: y + height\n            };\n\n            if (intersection.x1 < intersection.x2) {\n                canvas\n                    .getContext('2d')\n                    .fillRect(\n                        intersection.x1 - leftOffset,\n                        intersection.y1,\n                        intersection.x2 - intersection.x1,\n                        intersection.y2 - intersection.y1\n                    );\n            }\n        });\n    }\n\n    /**\n     * Fill a given text on the canvases\n     *\n     * @param {string} text\n     * @param {number} x\n     * @param {number} y\n     * @private\n     */\n    fillText(text, x, y) {\n        let textWidth;\n        let xOffset = 0;\n\n        this.canvases.forEach(canvas => {\n            const context = canvas.getContext('2d');\n            const canvasWidth = context.canvas.width;\n\n            if (xOffset > x + textWidth) {\n                return;\n            }\n\n            if (xOffset + canvasWidth > x) {\n                textWidth = context.measureText(text).width;\n                context.fillText(text, x - xOffset, y);\n            }\n\n            xOffset += canvasWidth;\n        });\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugin/timeline.js"],"sourceRoot":""}